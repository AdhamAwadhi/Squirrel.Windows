<Wix xmlns="http://schemas.microsoft.com/wix/2006/wi" xmlns:util="http://schemas.microsoft.com/wix/UtilExtension">
  <Bundle 
      Name="SampleApp" 
      Version="1.0.0.0" 
      Manufacturer="Example" 
      UpgradeCode="c99da653-84c8-4c03-bc0e-716cc966b50c">
    <BootstrapperApplicationRef Id="ManagedBootstrapperApplicationHost">
      <Payload Name="BootstrapperCore.config" SourceFile="$(var.SOLUTIONDIR)\Shimmer.WiXUI\bin\Release\Shimmer.WiXUI.config" />

      <Payload SourceFile="$(var.SOLUTIONDIR)\Shimmer.WiXUI\bin\Release\Core.dll" />
      <Payload SourceFile="$(var.SOLUTIONDIR)\Shimmer.WiXUI\bin\Release\Ionic.Zip.dll" />
      <Payload SourceFile="$(var.SOLUTIONDIR)\Shimmer.WiXUI\bin\Release\MarkdownSharp.dll" />
      <Payload SourceFile="$(var.SOLUTIONDIR)\Shimmer.WiXUI\bin\Release\NLog.dll" />
      <Payload SourceFile="$(var.SOLUTIONDIR)\Shimmer.WiXUI\bin\Release\NuGetPackageExplorer.Types.dll" />
      <Payload SourceFile="$(var.SOLUTIONDIR)\Shimmer.WiXUI\bin\Release\ReactiveUI.Blend.dll" />
      <Payload SourceFile="$(var.SOLUTIONDIR)\Shimmer.WiXUI\bin\Release\ReactiveUI.dll" />
      <Payload SourceFile="$(var.SOLUTIONDIR)\Shimmer.WiXUI\bin\Release\ReactiveUI.Routing.dll" />
      <Payload SourceFile="$(var.SOLUTIONDIR)\Shimmer.WiXUI\bin\Release\ReactiveUI.Xaml.dll" />
      <Payload SourceFile="$(var.SOLUTIONDIR)\Shimmer.WiXUI\bin\Release\SharpBITS.Base.dll" />
      <Payload SourceFile="$(var.SOLUTIONDIR)\Shimmer.WiXUI\bin\Release\Shimmer.Client.dll" />
      <Payload SourceFile="$(var.SOLUTIONDIR)\Shimmer.WiXUI\bin\Release\Shimmer.Core.dll" />
      <Payload SourceFile="$(var.SOLUTIONDIR)\Shimmer.WiXUI\bin\Release\Shimmer.WiXUi.dll" />
      <Payload SourceFile="$(var.SOLUTIONDIR)\Shimmer.WiXUI\bin\Release\System.Interactive.dll" />
      <Payload SourceFile="$(var.SOLUTIONDIR)\Shimmer.WiXUI\bin\Release\System.IO.Abstractions.dll" />
      <Payload SourceFile="$(var.SOLUTIONDIR)\Shimmer.WiXUI\bin\Release\System.Reactive.dll" />
      <Payload SourceFile="$(var.SOLUTIONDIR)\Shimmer.WiXUI\bin\Release\System.Reactive.Windows.Threading.dll" />
      <Payload SourceFile="$(var.SOLUTIONDIR)\Shimmer.WiXUI\bin\Release\System.Windows.Interactivity.dll" />

      <Payload SourceFile="$(var.SOLUTIONDIR)\SampleUpdatingApp\SampleUpdatingApp-1.0.0.0-full.nupkg" />
    </BootstrapperApplicationRef>

    <Chain>
      <PackageGroupRef Id="Netfx4Full" />
    </Chain>
  </Bundle>

  <!-- NetFx.wxs -->

  <Fragment>
      <WixVariable Id="WixMbaPrereqPackageId" Value="Netfx4Full" />
      <WixVariable Id="WixMbaPrereqLicenseUrl" Value="NetfxLicense.rtf" />

      <util:RegistrySearch Root="HKLM" Key="SOFTWARE\Microsoft\Net Framework Setup\NDP\v4\Full" Value="Version" Variable="Netfx4FullVersion" />
      <util:RegistrySearch Root="HKLM" Key="SOFTWARE\Microsoft\Net Framework Setup\NDP\v4\Full" Value="Version" Variable="Netfx4x64FullVersion" Win64="yes" />

      <PackageGroup Id="Netfx4Full">
          <ExePackage Id="Netfx4Full" Cache="no" Compressed="no" PerMachine="yes" Permanent="yes" Vital="yes" SourceFile="dotNetFx40_Full_x86_x64.exe"
                      DownloadUrl="http://download.microsoft.com/download/9/5/A/95A9616B-7A37-4AF6-BC36-D6EA96C8DAAE/dotNetFx40_Full_x86_x64.exe"
                      DetectCondition="Netfx4FullVersion AND (NOT VersionNT64 OR Netfx4x64FullVersion)" />
      </PackageGroup>
  </Fragment>

</Wix>
